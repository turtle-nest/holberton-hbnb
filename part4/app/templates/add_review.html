<!-- add_review.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add a Review</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='icon.png') }}">
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="App Logo" class="logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="login.html" id="login-link" class="login-button">Login</a>
      <button id="logout-button" class="logout-button">Logout</button>
    </nav>
  </header>

  <main>
    <h1 class="page-title">Leave a Review</h1>

    <div id="place-details" class="place-details">
      <!-- Place details will be populated dynamically -->
    </div>

    <section id="reviews">
      <h2>User Reviews</h2>
      <!-- Reviews will be populated dynamically -->
    </section>

    <section id="add-review">
      <h2>Your Review</h2>

      <a id="add-review-link" class="details-button" style="margin-bottom: 1rem; display:inline-block;">
        View Full Place Page
      </a>

      <form id="review-form">
        <label for="review-text">Review:</label>
        <textarea id="review-text" name="review" required></textarea>

        <label for="rating">Rating:</label>
        <select id="rating" name="rating" required>
          <option value="" disabled selected>Choose a note</option>
          <option value="5">⭐⭐⭐⭐⭐</option>
          <option value="4">⭐⭐⭐⭐</option>
          <option value="3">⭐⭐⭐</option>
          <option value="2">⭐⭐</option>
          <option value="1">⭐</option>
        </select>

        <button type="submit">Submit</button>
      </form>
    </section>
  </main>

  <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const placeId = params.get('id');
      const link = document.getElementById('add-review-link');
      if (placeId && link) {
        link.href = `place.html?id=${placeId}`;
      }

      // Dynamically added "Leave a Review" button in the details page
      const detailsSection = document.getElementById('place-details');
      if (detailsSection && placeId) {
        const reviewBtn = document.createElement('a');
        reviewBtn.href = `add_review.html?id=${placeId}`;
        reviewBtn.textContent = "Leave a Review";
        reviewBtn.className = "details-button";
        reviewBtn.style.marginTop = '1rem';
        detailsSection.appendChild(reviewBtn);
      }
    });
  </script>

  <footer>
    <p>© 2025 All rights reserved.</p>
  </footer>
</body>
</html>
